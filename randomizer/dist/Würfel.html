<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Randomizer</title>

        <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css?family=Roboto"
        />
        <style>html{height:100%}body,html{margin:0;padding:0;width:100%;background:0 0;font:16px Roboto}body{min-height:100%;color:#111;background:#fff}li,ul{margin:0;padding:0;list-style-type:none}ul>li{width:100%}h1{font-size:2.18rem}h2{font-size:1.9rem}h3{font-size:1.64rem}h4{font-size:1.43rem}h5{font-size:1.28rem}h6{font-size:1.18rem}h1,h2,h3,h4,h5,h6{margin:0;margin-bottom:.6em;color:inherit;font-weight:400}h1{width:100%;text-align:center}label,p,span{margin:0 0 1rem 0;font-size:1rem;font-weight:400}label:last-child,p:last-child,span:last-child{margin-bottom:0}li>p{margin-bottom:0}a{color:inherit}[disabled]{user-select:none;pointer-events:none;filter:brightness(.8)}.fa,.fas,i{padding:0}.hide{opacity:0;display:none}.selectable{cursor:pointer}.box{padding:20px;background:#eee;border-left:1px solid #111}header{padding:20px 40px 0;border-top:5px solid #e4986c}header .header-inner{padding:0 40px}header .icon{font-size:20px}main{padding:0 40px;display:flex;flex-direction:column}h1{text-align:left}.app{margin:0 auto;padding:0;max-width:1080px;box-sizing:border-box}.notification{transition:all linear 2s;margin:0;padding:10px 20px;border:1px solid #333;background:#fff}.notification.hidden{display:none}.notification-ok{background:#57bf6b}.notification-warning{background:#ccb638}.notification-error{background:#bb4e4e}.notification-info{background:#99bef5}.notification p{margin:0;padding:0}.top-header{padding:10px 0;display:flex;justify-content:center;align-items:center;background:#eee}.top-header a{display:inline-flex;justify-content:center;align-items:center;text-decoration:none}.top-header a h1{margin:0}.top-header a .icon{max-width:45px}.content{flex-grow:1}.content h2{margin-top:0}.tabs .tab{margin:0;padding:10px 0;background:#eee;border:1px solid transparent;color:#fff;white-space:nowrap;cursor:pointer;transition:background .2s linear}.tabs .tab:last-child .tab-label{border-right:none}.tabs .tab-label{padding:0 10px;transition:color .2s linear}.tabs .tab-active{background:#fff;border-color:#333}.tabs .tab-active .tab-label{font-weight:600;text-decoration:underline;color:#333}.actions{margin:0;padding:0;display:flex;flex-direction:row;justify-content:center;align-items:center}.actions .action{margin-right:5px;padding:0;overflow:hidden}.actions .action [type=submit]{max-width:initial;float:none;align-self:initial}.actions .action:last-child{margin-right:0}.flex{display:flex;flex-direction:row}.flex-inline{display:inline-flex;width:initial}.flex>*{margin-right:10px}.flex>:last-child{margin-right:0}.flex-v{flex-direction:column}.flex-v>*{margin-bottom:10px;margin-right:0}.flex-h{flex-direction:row}.flex-h>*{margin-bottom:0}.flex-wrap{flex-wrap:wrap}.flex-align{align-items:center}.flex-justify{justify-content:center}.flex-end{margin-left:auto}.flex-spaced>*{margin-right:30px}.flex-spaced.flex-v>{margin-bottom:30px}.flex-fill>{flex:1}.grid{display:grid;grid-gap:10px}.grid>*{margin:0}.grid-v{grid-auto-flow:row}.grid-h{grid-auto-flow:column}.grid-nogap{grid-gap:0}.grid-inline{display:inline-grid}.grid-align{align-items:center}.grid-justify{justify-content:center}.grid-2{grid-template-columns:repeat(2,1fr)}.grid-3{grid-template-columns:repeat(3,1fr)}.list{margin:0;padding:0;display:flex;flex-direction:row}.list .list-item{margin-right:10px;padding:10px 15px;box-sizing:border-box;border-bottom:1px solid #111}.list .list-item>.list-item{padding:0;border-bottom:none}.list .list-item:hover{background:#eee}.list .list-item:last-child{margin-right:0}.list-v{flex-direction:column}.list-v .list-item{margin-right:0;width:100%}.list-v .list-item:last-child{margin-bottom:0}.list-h .list-item{margin-bottom:0}.list-nohover .list-item:hover{background:inherit}.list-spaced{margin-right:30px}.list-spaced.list-v{margin-right:0;margin-bottom:30px}.list-selectable .list-item{cursor:pointer}.list-simple .list-item{padding:0;border:none}.list-fill .list-item{flex:1}.list-fill .list-item>.list-item{flex:initial}.menu-container{display:flex;flex-direction:column}.menu-container .menu-title{margin-bottom:5px;padding:5px 10px;background:#eee;font-size:18px}.menu-container .menu-group{padding:0 10px}.menu-container .menu-group:first-child{padding-left:0}.menu-container .menu-items{display:inline-flex;flex-direction:column}.menu-container .menu-items.flex-h{flex-direction:row}.menu-container .menu-items.flex-h .menu-item{margin-bottom:0;margin-right:5px}.menu-container .menu-items.flex-h .menu-item:last-child{margin-right:0}.menu-container .menu-item{margin-bottom:5px;padding:0;align-items:center;width:fit-content;border-bottom:2px inset #111;cursor:pointer;transition:all .1s linear}.menu-container .menu-item.item-box{background:#6b3d15}.menu-container .menu-item a{padding:0 10px;text-decoration:none;display:flex;flex-direction:row;align-items:center;justify-content:center;border-bottom:2px solid transparent}.menu-container .menu-item a.active{border-bottom-color:#e4986c}.menu-container .menu-item a>*{margin-right:0;padding:5px;transition:all .1s linear}.menu-container .menu-item a svg{padding:8px 0}.menu-container .menu-item:hover{background:#ccc}.menu-container .menu-item:hover .menu-title-prefix{padding-left:7px;padding-right:3px}.menu-container .menu-item:last-child{margin-bottom:0}.menu-container.menu-horizontal{flex-direction:row}.menu-container.menu-horizontal .menu-items{display:flex;flex-direction:row}.menu-container.menu-horizontal .menu-item{margin-right:5px;margin-bottom:0;border:none}.menu-container.menu-horizontal .menu-item:last-child{margin-right:0}button,input,select,textarea{margin:0;padding:8px 14px;width:100%;border-color:#ccc;box-sizing:border-box;background:#eee;font-family:inherit;font-size:16px;color:#111}button:active,button:focus,input:active,input:focus,select:active,select:focus,textarea:active,textarea:focus{outline:0}select{padding:6px 14px}.btn,button,input,input[type=submit],select{border:1px solid #ccc}[type=submit]{max-width:33.33333%;align-self:flex-end}.debug-panel{padding:10px;position:absolute;bottom:10px;left:10px;background:#fff}.btn,button,input[type=submit]{padding:8px 14px;border:none;outline:0}.btn:last-child{margin-bottom:0}.btn span+*,button span+*,input[type=submit] span+*{margin-left:5px}.btn:hover,button:hover,input[type=submit]:hover{cursor:pointer}.btn,button{background:#ccc;text-decoration:none;transition:all 50ms linear;width:fit-content}.btn-ok,.button-ok{background:#57bf6b}.btn-error,.button-error{background:#bb4e4e}.btn-warning,.button-warning{background:#ccb638}.btn-info,.button-info{background:#99bef5}.btn-submit,.button-submit{background:#e9b546}.btn-small,.button-small{padding:4px 10px;width:fit-content;font-size:12px}.btn-clean,.btn-initial,.button-clean,.button-initial{padding:initial;border:nowne;box-shadow:none;background:0 0}.btn-initial,.button-initial{max-width:initial;width:initial}.btn-reset,.button-reset{width:initial}.btn-fit,.button-fit{width:fit-content}.btn:hover,button:hover{text-decoration:underline}.form{margin:0;padding:0;display:flex;flex-direction:column}.form textarea{resize:vertical}.form .form-field{margin-bottom:20px}.form .form-field:last-child:first-child>*{margin-bottom:0}.form .form-field label,.form .form-field p{margin-bottom:5px}.form .form-field label:last-child,.form .form-field p:last-child{margin-bottom:0}.form .form-field.flex-h>*{margin-right:20px;max-width:50%;width:100%}.form .form-field.flex-h>:last-child{margin-right:0}.form .form-field .form-field-checkbox{position:relative;display:block}.form .form-field .form-field-checkbox input[type=checkbox]{opacity:0;width:0;height:0}.form .form-field .form-field-checkbox input[type=checkbox]:checked~.field-checkbox-marker{border-color:#6a8072;background:#a2c1ad}.form .form-field .form-field-checkbox input[type=checkbox]:checked~.field-checkbox-marker>*{opacity:1}.form .form-field .form-field-checkbox .field-checkbox-marker{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);color:#6a8072;background:#eee;width:24px;height:24px;border:1px solid #111}.form .form-field .form-field-checkbox .field-checkbox-marker>*{padding:4px;opacity:0}.form .form-field .form-field-checkbox .field-checkbox-marker:hover{cursor:pointer}.form .form-field:last-child{margin-bottom:0}.form .form-field-header{padding:9px 0;border-left:2px solid #111;background:#eee;box-sizing:border-box}.form .form-field-header>*{margin-bottom:5px;padding:0 10px}.form .form-field-header>:last-child{margin-bottom:0}.form .form-field-wrapper{box-sizing:border-box}.form .form-field-description p,.form .form-field-description span{font-size:12px;font-style:italic;color:#6c6c6c}.form input[type=color]{padding:2px 4px;width:45px;height:23px;box-sizing:content-box}.form input[required],.form select[required],.form textarea[required]{border-left:2px solid #bb4e4e}.form .btn,.form button[type=submit]{align-self:flex-end}.form:last-child{margin-bottom:0}.col{width:100%}.col-12{max-width:100%}.col-11{max-width:91.66%}.col-10{max-width:83.33%}.col-9{max-width:75%}.col-8{max-width:66.67%}.col-7{max-width:58.33%}.col-6{max-width:50%}.col-5{max-width:41.66%}.col-4{max-width:33.33%}.col-3{max-width:25%}.col-2{max-width:16.67%}.col-1{max-width:8.33%}.container{margin-bottom:30px}.container-vertical{padding:0 20px}.container-expander{padding:7px 14px;box-sizing:border-box}.container-spaceout{margin:20px}.container-spaceout-v{margin-top:20px;margin-bottom:20px}.container-spaceout-v+.container-spaceout-v{margin-top:0}.container-spaceout-h{margin-left:20px;margin-right:20px}.container-spaceout-h+.container-spaceout-h{margin-left:0}.container-reveal:hover .hide{opacity:1;display:inherit}.container-grid{display:grid}.container-grid .left-side{width:50%}.container-grid .right-side{width:50%}.close{padding:8px 12px;background:#bb4e4e;cursor:pointer;color:#fff}.onhover-container .onhover{opacity:0}.onhover-container:hover .onhover{opacity:1}.padding{padding:10px}.padding-v{padding:10px 0}.padding-h{padding:0 10px}.batch{padding:2px 10px;background:#111;color:#111;border-radius:2px;border:2px outset #111;font-family:"Source Sans Pro";font-size:12px;font-weight:600;white-space:nowrap;box-sizing:border-box}.batch-normal{font-size:inherit}.text-sub{font-size:12px;font-style:italic;color:#6c6c6c}.text-dark{color:#111}.text-center{text-align:center}.text-reverse{background:#111;color:#000}.text-title{padding:10px 15px;display:inline-block;font-size:18px;background:#eee}.text-shortened{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.msg-ok{color:#57bf6b!important}.msg-error{color:#bb4e4e!important}.msg-warning{color:#ccb638!important}.msg-info{color:#99bef5!important}.value-true{color:#57bf6b}.value-false{color:#bb4e4e}body{color:#000;background:#fff;font-family:Roboto}#app{margin:50px auto 100px}.container-box{padding:10px;border:1px solid #ccc}.left{margin-right:50px}.roll-groups{grid-template-columns:repeat(5,1fr)}.roll-groups .list-item{border:1px solid #777;font-size:14px;text-align:center}.roll-items{grid-template-columns:repeat(5,1fr)}.roll-item{color:#000;text-align:center}.history-item{margin-bottom:0;padding:10px 0;border-bottom:1px solid #ccc}.history-item .roll-title{padding:5px 10px}.history-item .groups{padding:0 10px}.history-item .group-item{padding:5px}</style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </head>
    <body>
        <div id="app" class="app"></div>

        <script>class RnzRoll{constructor(t,e){this.id=RnzMisc.generateId(),this.settings=t,this.result=e,this.groups=[],this.buildGroups()}buildGroups(){this.groups=this.result.reduce((t,e)=>({...t,[e.value]:t[e.value]?t[e.value]+1:1}),{})}}var RnzState={cubesCount:10,rangeMin:1,rangeMax:5,rollName:"Unbenannt",selectedRoll:null,rollHistory:[],localStorageEnabled:localStorage&&!0,usedIds:[]},RnzMisc={generateId(){for(;;){const t=Math.random().toString(20).substr(2,9);if(-1==RnzState.usedIds.indexOf(t))return RnzState.usedIds[RnzState.usedIds.push(t)-1]}}},RnzDice={load(){if(!RnzState.localStorageEnabled)return console.warn("LocalStorage disabled"),!1;RnzState={...RnzState,...JSON.parse(localStorage.getItem("pnpt-cheap"))}},save(t=!1){if(!RnzState.localStorageEnabled)return!1;localStorage.setItem("pnpt-cheap",JSON.stringify(RnzState)),t&&RnzDice.render()},roll(){const t=RnzDice.getCurrentSettings(),e=Array(t.cubesCount).fill(0).reduce((e,n,l)=>{const i=Math.ceil(t.rangeMin),a=Math.floor(t.rangeMax),s=Math.floor(Math.random()*(a-i+1)+i),r=e.find(t=>t.value==s),o={value:s,color:r&&r.color||Math.random().toString(16).slice(-6)};return[...e,o]},[]),n={...new RnzRoll(t,e),timestamp:+new Date};return RnzState.rollHistory.push(n),RnzState.selectedRoll=n.id,RnzDice.save(),RnzDice.getActiveRoll()},getActiveRoll(){const t=RnzState.selectedRoll,e=RnzState.rollHistory;return e.length&&(t?e.find(e=>e.id==t):e[e.length-1])||!1},getPreviousRoll(){const t=RnzDice.getActiveRoll();if(void 0===t)return!1;const e=RnzState.rollHistory,n=e.findIndex(e=>e.id==t.id);return-1!=n&&(0!=n&&e[n-1])},setPreviousRoll(){const t=RnzDice.getActiveRoll();if(void 0===t)return!1;const e=RnzState.rollHistory,n=e.findIndex(e=>e.id==t.id);if(0==n)return!0;RnzState.selectedRoll=e[n-1].id,RnzDice.save()},getNextRoll(){const t=RnzDice.getActiveRoll();if(void 0===t)return!1;const e=RnzState.rollHistory,n=e.findIndex(e=>e.id==t.id);return!(n>=e.length-1)&&e[n+1]},setNextRoll(){const t=RnzDice.getActiveRoll();if(void 0===t)return!1;const e=RnzState.rollHistory,n=e.findIndex(e=>e.id==t.id);if(n>=e.length-1)return!0;RnzState.selectedRoll=e[n+1].id,RnzDice.save()},getCurrentSettings:()=>({cubesCount:RnzState.cubesCount,rangeMin:RnzState.rangeMin,rangeMax:RnzState.rangeMax,rollName:RnzState.rollName}),dom_buildActiveRollResults(){const t=RnzDice.getActiveRoll();if(!t)return $('<p class="text-title">Kein Wurf ausgewählt</p>');const e=t.result.map(({value:t,color:e},n)=>$("<p></p>").addClass(`roll-item ${n} list-item text-title`).html(t).css("background","#"+e));return $('<div class="roll-items grid"></div>').append(...e)},dom_buildActiveRollGroups(){const t=RnzDice.getActiveRoll();return t?[...Object.entries(t.groups)].map(([e,n])=>{const l=t.result.find(t=>t.value==e);return $("<p></p>").addClass("roll-group-item list-item").html(e+" x"+n).css("background","#"+l.color)}):$('<p class="text-title"></p>')},dom_buildRollHistory(){const t=RnzState.rollHistory.sort((t,e)=>!0);return t.length?t.map(t=>{const e=$("<li></li>");e.addClass("history-item list-item");const n=[...Object.entries(t.groups)].map(([e,n])=>{const l=t.result.find(t=>t.value==e);return $("<p></p>").addClass("group-item list-item").html(e+" x"+n).css("background","#"+l.color)}),l=new Date(t.timestamp),i=l.getHours(),a="0"+l.getMinutes(),s="0"+l.getSeconds(),r=i+":"+a.substr(-2)+":"+s.substr(-2),o=$('<p class="roll-title"></p>');o.append($("<span></span>").html(r)),o.append($("<span> - </span>")),o.append($("<span></span>").html(t.settings.rollName));const d=$('<ul class="groups flex flex-h"></ul>');return d.append(),d.append(n),e.append(o),e.append(d),e}):$('<p class="text-title">Es haben noch keine Würfe stattgefunden</p>')},onOptionsChange(t){const e=t.target.value;switch(t.target.name){case"cubes-count":RnzState.cubesCount=parseInt(e)||1;break;case"range-min":RnzState.rangeMin=parseInt(e)>RnzState.rangeMax?RnzState.rangeMax:parseInt(e);break;case"range-max":RnzState.rangeMax=parseInt(e)||RnzState.rangeMin;break;case"roll-name":RnzState.rollName=e}RnzDice.save()},onRoll(t){t.preventDefault(),RnzDice.roll(),RnzDice.render()},render(){$("#app").empty();const t=$("<div></div>");t.addClass("left list-item flex flex-v col col-6");const e=$(`<div class="form-field flex flex-h flex-align">\n\t\t\t\t\t\t\t\t<div class="form-field-title">\n\t\t\t\t\t\t\t\t\t<label>Würfelanzahl</label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-field-wrapper">\n\t\t\t\t\t\t\t\t\t<input id="cubes-count" name="cubes-count" type="number" min="1" step="1" value="${RnzState.cubesCount}" required/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>`),n=$(`<div class="form-field flex flex-h flex-align">\n\t\t\t\t\t\t\t\t<div class="form-field-title">\n\t\t\t\t\t\t\t\t\t<label>Augenzahl Min</label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-field-wrapper">\n\t\t\t\t\t\t\t\t\t<input id="range-min" name="range-min" type="number" min="0" max="${RnzState.rangeMax}" step="1" value="${RnzState.rangeMin}" required/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`),l=$(`<div class="form-field flex flex-h flex-align">\n\t\t\t\t\t\t\t\t<div class="form-field-title">\n\t\t\t\t\t\t\t\t\t<label>Augenzahl Max</label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-field-wrapper">\n\t\t\t\t\t\t\t\t\t<input id="range-max" name="range-max" type="number" min="${RnzState.rangeMin}" step="1" value="${RnzState.rangeMax}" required/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>`),i=$(`<div class="form-field flex flex-h flex-align">\n\t\t\t\t\t\t\t\t<div class="form-field-title">\n\t\t\t\t\t\t\t\t\t<label>Name des Wurfes<label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-field-wrapper">\n\t\t\t\t\t\t\t\t\t<input id="roll-name" name="roll-name" value="${RnzState.rollName}" required/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>`);let a=$('<button type="submit">Roll</button>');a=a.addClass("btn btn-info"),e.on("change",RnzDice.onOptionsChange),n.on("change",RnzDice.onOptionsChange),l.on("change",RnzDice.onOptionsChange),i.on("change",RnzDice.onOptionsChange);const s=$("<div></div>"),r=$('<form method="post"></form>');r.addClass("options container-box list-item form flex flex-v"),r.on("submit",RnzDice.onRoll),r.append(e,n,l,i,a);const o=RnzDice.getPreviousRoll(),d=RnzDice.getNextRoll(),c=$("<button></button>"),u=$("<button></button>");0!=o?(c.html("Vorheriger Wurf | "+o.settings.rollName),c.on("click",()=>{RnzDice.setPreviousRoll(),RnzDice.render()})):c.html("Vorheriger Wurf").attr("disabled",!0),0!=d?(u.html("Nächster Wurf | "+d.settings.rollName),u.on("click",()=>{RnzDice.setNextRoll(),RnzDice.render()})):u.html("Nächster Wurf").attr("disabled",!0),$rollStepSelection=$('<div class="list-item flex flex-h"></div>').append(c,u),s.append(r),t.append(s),t.append($rollStepSelection);const p=$("<div></div>");p.addClass("right list-item flex flex-v col col-6");const R=RnzDice.getActiveRoll(),g=$('<p class="text-title"></p>').html(R?R.settings.rollName:"Kein Wurf ausgewählt"),m=$("<div></div>");m.addClass("roll-groups container-box grid"),m.append(RnzDice.dom_buildActiveRollGroups());const f=$("<div></div>");f.addClass("roll-results container-box grid"),f.append(RnzDice.dom_buildActiveRollResults()),p.append(g),p.append(m),p.append(f);const v=$('<div class="flex flex-h"></div>');v.append(t,p);$("<div></div>");const z=$('<div class="roll-history flex flex-v"></div>'),h=RnzDice.dom_buildRollHistory();$rollHistoryTitle=$('<p class="text-title">Wurf-Verlauf</p>'),$rollHistoryTitle.on("click",()=>{$(".history-item").slideToggle()}),z.append($rollHistoryTitle),z.append(h);const b=$("#app");b.append(v),b.append("<hr />"),b.append(z)}};document.addEventListener("DOMContentLoaded",()=>{RnzDice.load(),RnzDice.render()});</script>
    </body>
</html>
